{% extends 'base.html' %}

{% block head %}
<title>State Graph</title>
{% endblock %}

{% block body %}
<div class="row">
    <div class="col">
        <br>
        <form action="/datasearchstate"
            style="background-color: white; width: 100%; border-radius: 10px; padding: 20px;" method="POST">
            <div class="form-group">
                <label for="state">Select State</label>
                <select class="form-control" id="state" name="state" value="{{ request.form['state'] }}">
                    <option value="AL" {% if state %} {% if state == 'AL' %} selected {% endif %} {% else %} selected
                        {% endif %}> Alabama </option>
                    <option value="AK" {% if state %} {% if state == 'AK' %} selected {% endif %} {% endif %}> Alaska
                    </option>
                    <option value="AZ" {% if state %} {% if state == 'AZ' %} selected {% endif %} {% endif %}> Arizona
                    </option>
                    <option value="AR" {% if state %} {% if state == 'AR' %} selected {% endif %} {% endif %}> Arkansas
                    </option>
                    <option value="CA" {% if state %} {% if state == 'CA' %} selected {% endif %} {% endif %}>
                        California
                    </option>
                    <option value="CO" {% if state %} {% if state == 'CO' %} selected {% endif %} {% endif %}> Colorado
                    </option>
                    <option value="CT" {% if state %} {% if state == 'CT' %} selected {% endif %} {% endif %}>
                        Connecticut
                    </option>
                    <option value="DE" {% if state %} {% if state == 'DE' %} selected {% endif %} {% endif %}> Delaware
                    </option>
                    <option value="DC" {% if state %} {% if state == 'DC' %} selected {% endif %} {% endif %}> District
                        Of
                        Columbia </option>
                    <option value="FL" {% if state %} {% if state == 'FL' %} selected {% endif %} {% endif %}> Florida
                    </option>
                    <option value="GA" {% if state %} {% if state == 'GA' %} selected {% endif %} {% endif %}> Georgia
                    </option>
                    <option value="HI" {% if state %} {% if state == 'HI' %} selected {% endif %} {% endif %}> Hawaii
                    </option>
                    <option value="ID" {% if state %} {% if state == 'ID' %} selected {% endif %} {% endif %}> Idaho
                    </option>
                    <option value="IL" {% if state %} {% if state == 'IL' %} selected {% endif %} {% endif %}> Illinois
                    </option>
                    <option value="IN" {% if state %} {% if state == 'IN' %} selected {% endif %} {% endif %}> Indiana
                    </option>
                    <option value="IA" {% if state %} {% if state == 'IA' %} selected {% endif %} {% endif %}> Iowa
                    </option>
                    <option value="KS" {% if state %} {% if state == 'KS' %} selected {% endif %} {% endif %}> Kansas
                    </option>
                    <option value="KY" {% if state %} {% if state == 'KY' %} selected {% endif %} {% endif %}> Kentucky
                    </option>
                    <option value="LA" {% if state %} {% if state == 'LA' %} selected {% endif %} {% endif %}> Louisiana
                    </option>
                    <option value="ME" {% if state %} {% if state == 'ME' %} selected {% endif %} {% endif %}> Maine
                    </option>
                    <option value="MD" {% if state %} {% if state == 'MD' %} selected {% endif %} {% endif %}> Maryland
                    </option>
                    <option value="MA" {% if state %} {% if state == 'MA' %} selected {% endif %} {% endif %}>
                        Massachusetts
                    </option>
                    <option value="MI" {% if state %} {% if state == 'MI' %} selected {% endif %} {% endif %}> Michigan
                    </option>
                    <option value="MN" {% if state %} {% if state == 'MN' %} selected {% endif %} {% endif %}> Minnesota
                    </option>
                    <option value="MS" {% if state %} {% if state == 'MS' %} selected {% endif %} {% endif %}>
                        Mississippi
                    </option>
                    <option value="MO" {% if state %} {% if state == 'MO' %} selected {% endif %} {% endif %}> Missouri
                    </option>
                    <option value="MT" {% if state %} {% if state == 'MT' %} selected {% endif %} {% endif %}> Montana
                    </option>
                    <option value="NE" {% if state %} {% if state == 'NE' %} selected {% endif %} {% endif %}> Nebraska
                    </option>
                    <option value="NV" {% if state %} {% if state == 'NV' %} selected {% endif %} {% endif %}> Nevada
                    </option>
                    <option value="NH" {% if state %} {% if state == 'NH' %} selected {% endif %} {% endif %}> New
                        Hampshire
                    </option>
                    <option value="NJ" {% if state %} {% if state == 'NJ' %} selected {% endif %} {% endif %}> New
                        Jersey
                    </option>
                    <option value="NM" {% if state %} {% if state == 'NM' %} selected {% endif %} {% endif %}> New
                        Mexico
                    </option>
                    <option value="NY" {% if state %} {% if state == 'NY' %} selected {% endif %} {% endif %}> New York
                    </option>
                    <option value="NC" {% if state %} {% if state == 'NC' %} selected {% endif %} {% endif %}> North
                        Carolina
                    </option>
                    <option value="ND" {% if state %} {% if state == 'ND' %} selected {% endif %} {% endif %}> North
                        Dakota
                    </option>
                    <option value="OH" {% if state %} {% if state == 'OH' %} selected {% endif %} {% endif %}> Ohio
                    </option>
                    <option value="OK" {% if state %} {% if state == 'OK' %} selected {% endif %} {% endif %}> Oklahoma
                    </option>
                    <option value="OR" {% if state %} {% if state == 'OR' %} selected {% endif %} {% endif %}> Oregon
                    </option>
                    <option value="PA" {% if state %} {% if state == 'PA' %} selected {% endif %} {% endif %}>
                        Pennsylvania
                    </option>
                    <option value="RI" {% if state %} {% if state == 'RI' %} selected {% endif %} {% endif %}> Rhode
                        Island
                    </option>
                    <option value="SC" {% if state %} {% if state == 'SC' %} selected {% endif %} {% endif %}> South
                        Carolina
                    </option>
                    <option value="SD" {% if state %} {% if state == 'SD' %} selected {% endif %} {% endif %}> South
                        Dakota
                    </option>
                    <option value="TN" {% if state %} {% if state == 'TN' %} selected {% endif %} {% endif %}> Tennessee
                    </option>
                    <option value="TX" {% if state %} {% if state == 'TX' %} selected {% endif %} {% endif %}> Texas
                    </option>
                    <option value="UT" {% if state %} {% if state == 'UT' %} selected {% endif %} {% endif %}> Utah
                    </option>
                    <option value="VT" {% if state %} {% if state == 'VT' %} selected {% endif %} {% endif %}> Vermont
                    </option>
                    <option value="VA" {% if state %} {% if state == 'VA' %} selected {% endif %} {% endif %}> Virginia
                    </option>
                    <option value="WA" {% if state %} {% if state == 'WA' %} selected {% endif %} {% endif %}>
                        Washington
                    </option>
                    <option value="WV" {% if state %} {% if state == 'WV' %} selected {% endif %} {% endif %}> West
                        Virginia
                    </option>
                    <option value="WI" {% if state %} {% if state == 'WI' %} selected {% endif %} {% endif %}> Wisconsin
                    </option>
                    <option value="WY" {% if state %} {% if state == 'WY' %} selected {% endif %} {% endif %}> Wyoming
                    </option>
                </select>
            </div>
            <div class="form-group">
                <label for="shuffle">Order By</label>
                <select class="form-control" id="shuffle" name="shuffle" value="{{ request.form['shuffle'] }}">
                    <option value="None" {% if shuffle %} {% if shuffle == 'None' %} selected {% endif %} {% else %}
                        selected {% endif %}> Date </option>
                    <option value="tot_cases" {% if shuffle %} {% if shuffle == 'tot_cases' %} selected {% endif %}
                        {% endif %}>
                        Total Cases </option>
                    <option value="new_case" {% if shuffle %} {% if shuffle == 'new_case' %} selected {% endif %}
                        {% endif %}>
                        New Cases </option>
                    <option value="tot_death" {% if shuffle %} {% if shuffle == 'tot_death' %} selected {% endif %}
                        {% endif %}>
                        Total Deaths </option>
                    <option value="new_death" {% if shuffle %} {% if shuffle == 'new_death' %} selected {% endif %}
                        {% endif %}>
                        New Deaths </option>
                </select>
            </div>
            <div class="form-group">
                <label for="daterange">Date Range</label><br>
                <input class="form-control" value="{{ request.form['daterange'] }}" type="text" name="daterange"
                    placeholder="YYYY-MM-DD to YYYY-MM-DD" required>
            </div>
            <button type="submit" class="btn btn-outline-danger"
                onclick="loadingFunction()">Search</button><br><br><span class="spinner-border text-danger" id="loading"
                style="width: 3rem; height: 3rem; display:none;" role="status">
                <span class="sr-only">Loading...</span>
            </span>
        </form>
    </div>
    {% if post %}
    <div class="col-10">
        <br>
        <div id="carouselExampleControls" class="carousel slide" data-ride="carousel">
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <h1 style="color: white; text-shadow: black 0px 0px 10px; text-align: center;">New Cases</h1>
                    <img style="border-radius: 10px;" class="d-block w-100"
                        src="{{ url_for('static', filename='newCases.png') }}" alt="New Cases">
                </div>
                <div class="carousel-item">
                    <h1 style="color: white; text-shadow: black 0px 0px 10px; text-align: center;">New Deaths</h1>
                    <img style="border-radius: 10px;" class="d-block w-100"
                        src="{{ url_for('static', filename='newDeaths.png') }}" alt="New Deaths">
                </div>
                <div class="carousel-item">
                    <h1 style="color: white; text-shadow: black 0px 0px 10px; text-align: center;">Total Cases</h1>
                    <img style="border-radius: 10px;" class="d-block w-100"
                        src="{{ url_for('static', filename='totalCases.png') }}" alt="Total Cases">
                </div>
                <div class="carousel-item">
                    <h1 style="color: white; text-shadow: black 0px 0px 10px; text-align: center;">Total Deaths</h1>
                    <img style="border-radius: 10px;" class="d-block w-100"
                        src="{{ url_for('static', filename='totalDeaths.png') }}" alt="Total Deaths">
                </div>
            </div>
            <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
        <br><br><br>
        <div style="overflow-y: scroll; height:350px; background-color: black; border: 5px solid #900000 ; border-radius: 10px;"
            class="table-responsive">
            <table class="table table-striped table-dark table-hover">
                <thead>
                    <tr>
                        {% for key in dataColumns %}
                        <th scope="col" style="background: grey; position: sticky; top: 0;">{{ key }}</th>
                        {% endfor %}
                    </tr>
                </thead>
                <tbody>
                    {% for row in dataItems %}
                    <tr>
                        {% for value in row %}
                        <td>{{ value }}</td>
                        {% endfor %}
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <br>
        <br>
        <br>
    </div>
    {% else %}
    {% endif %}
</div>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
{% endblock %}